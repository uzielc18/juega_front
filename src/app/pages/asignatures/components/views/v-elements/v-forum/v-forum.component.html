<div [nbSpinner]="loading" nbSpinnerStatus="primary" nbSpinnerSize="large">
<div class="work work-expired" style="margin-left: 20px; margin-right: 20px;"
*ngIf="tiempo_vencido && rolSemestre?.rol?.name === 'Estudiante' && pending?.justification?.length <= 1
  && !pending?.student_pending?.nota && pending?.student_pending?.realizo === '0'">
  <span>
    <p>Hola {{ userInfo.name }}!</p>, Lo sentimos tu Foro: {{ element?.titulo }} acaba de caducar hace {{
    expiredDays |
    i18nPlural:daysMap }} {{ expiredHours | i18nPlural:hoursMap }} {{ expiredMinutes | i18nPlural:minutesMap }} {{
    expiredSeconds | i18nPlural:secondsMap }}
  </span>
  <div class="ms-auto d-flex align-items-center">
    <button class="d-flex align-items-center mx-3 py-1 work-expired-button" (click)="justifications()">
      <nb-icon class="me-2" icon="info"></nb-icon>
      <span>Solicitar apertura</span>
    </button>
    <!-- <nb-icon class="work-expired-close" icon="close-outline"></nb-icon> -->
  </div>
</div>
  <div class="work work-remember" style="margin-left: 20px; margin-right: 20px;" *ngIf="!tiempo_vencido">
    <p>Hola {{ userInfo.name }}!,</p><span>Recuerda que tu Foro: {{ element?.titulo }} está por vencer en {{
    daysLeft |
      i18nPlural:daysMap }} {{ hoursLeft | i18nPlural:hoursMap }} {{ minutesLeft | i18nPlural:minutesMap }} {{
    secondsLeft | i18nPlural:secondsMap }}</span>
  </div>
  <div class="work work-evaluated" style="margin-left: 20px; margin-right: 20px;" *ngIf="pending?.student_pending?.realizo==='1' && pending?.student_pending?.calificado==='1'">
    <p>Hola {{ userInfo.name }}!,</p><span>Tu foro: {{ element?.titulo }} ya fué calificado</span>
  </div>
  <div class="work work-evaluated" style="margin-left: 20px; margin-right: 20px;" *ngIf="pending?.student_pending?.realizo==='1' && pending?.student_pending?.calificado==='0'">
    <p>Felicitaciones {{ userInfo.name }}!,</p><span>Ya entregaste tu foro ({{ element?.titulo }})</span>
  </div>
<nb-card class="instructions-container" style="margin-left: 20px; margin-right: 20px;">
  <nb-card-body>
    <div class="row">
      <div class="instructions col-md-9 col-xxl-10">
        <!-- <h4 class="instructions-title">{{ element?.titulo }}</h4> -->
        <p class="instructions-description" style="text-align: justify;">{{ element?.descripcion }}</p><br>
        <label class="label">Pregunta: &nbsp;&nbsp;</label><label
          style="font-size: 15px; text-align: justify">{{element?.forums?.pregunta}}</label>
      </div>
      <div class="col-md-3 col-xxl-2 pe-0">
        <div class="calification calification-evalue ms-auto" *ngIf="['Docente', 'Admin'].includes(rolSemestre?.rol?.name)"
          (click)="calificar(element)">
          <nb-icon icon="edit"></nb-icon>
          <span>Calificar</span>
        </div>

        <div class="calification ms-auto"
          *ngIf="rolSemestre?.rol?.name === 'Estudiante' && !pending?.student_pending?.nota">
          Aún no tiene calificación
        </div>
        <div class="calification calification-evaluated"
          *ngIf="rolSemestre?.rol?.name === 'Estudiante' && pending?.student_pending?.nota">
          <p>{{pending?.student_pending?.nota}}</p>
          <span>Calificación</span>
        </div>
      </div>
      <div class="comentario-style" *ngIf="rolSemestre?.rol?.name === 'Estudiante' && pending?.student_pending?.comentario_docente">
          <span style="font-size: 12px"><small class="label">Comentario del docente: </small>
            <small class="label"> {{pending?.student_pending?.comentario_docente}}</small></span>
      </div>
    </div>
    <div class="mt-4" *ngIf="rolSemestre?.rol?.name === 'Estudiante' && pending?.student_pending">
      <h4 class="send-work-title">Mis justificaciones</h4> <br>
      <div class="table-responsive">
        <table class="table table-sm">
          <thead>
          <tr style="font-size: 12px;">
            <th style="width: 1px;">#</th>
            <th>Justificación</th>
            <th>Respuesta</th>
            <th style="width: 1px;">Opción</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let just of pending?.justification; let i = index" style="font-size: 11px">
            <td>{{i + 1}}</td>
            <td>{{just?.justification}}</td>
            <td>{{just?.respuesta}}</td>
            <td>
              <button nbButton size="tiny" status="danger" *ngIf="just.estado_justification ===  'pendiente'"
                      >
                <nb-icon icon="trash"></nb-icon>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
    <!-- Permitir comentarios {{pending?.student_pending?.pending_forum?.permitir_comentarios}} <br>
    Ver Respuestas {{pending?.student_pending?.pending_forum?.ver_respuestas}} -->

    <nb-card>
      <nb-card-header style="padding-top: 5px; padding-bottom: 5px;"
        class="d-flex align-items-center justify-content-between">
        <div>
          Respuestas del foro:
        </div>
        <button
          *ngIf="pending?.student_pending?.pending_forum?.forums_responses?.length > 0 || listResponses?.length > 0"
          nbButton size="tiny" status="primary" (click)="changeEmit()">
          <nb-icon icon="refresh-outline"></nb-icon> Actualizar comentarios
        </button>
      </nb-card-header>
      <nb-card-body *ngIf="rolSemestre?.rol?.name === 'Estudiante' &&  pending?.student_pending" class="p-3">
        <app-children-comments
          [element]="element" [userInfo]="userInfo"
          [list]="pending?.student_pending?.pending_forum?.forums_responses || []" (changeEmit)="changeEmit()"
          [getValidComent]="getValidComent"
          [viewRespond]="element?.forums?.permitir_comentarios === 'SI' ? true : false"
          [validFecha]="tiempo_vencido ? true : false"
         [pending]="pending">
        </app-children-comments>
      </nb-card-body>
      <nb-card-body *ngIf="['Docente', 'Admin'].includes(rolSemestre?.rol?.name)" class="p-3">
        <app-children-comments [element]="element" [userInfo]="userInfo" [list]="listResponses"
          (changeEmit)="changeEmit()">
        </app-children-comments>
      </nb-card-body>
    </nb-card>
  </nb-card-body>
</nb-card>
</div>
