<div *ngFor="let quiz of questions; let i = index" >
  <div class="row">
    <div  [class]="quiz?.pluss ? 'col-md-10' : 'col-md-12'">
      <nb-card (click)="changePluss(quiz)" style="cursor: pointer;">
        <nb-card-body>
          {{i+1}} &nbsp;)&nbsp; {{quiz?.titulo || quiz?.pregunta}} {{quiz?.pluss}}
        </nb-card-body>
      </nb-card>
      <nb-card *ngIf="quiz.checked" [nbSpinner]="loading" nbSpinnerStatus="primary" nbSpinnerSize="large" >
        <nb-card-body>
          <div class="row">
            <div class="col-md-9">
              <form [formGroup]="formHeader">
                <label class="label">Pregunta:</label>
                <textarea nbInput fullWidth style="height: 115px;" formControlName="pregunta"></textarea>
                <control-messages [control]="formHeader.get('pregunta')"></control-messages>
              </form>
            </div>
            <div class="col-md-3">
              <div class="row text-center">
                <div class="col-md-6">
                  <label class="label">Imagen o Audio</label>
                  <lamb-prepare-file-pro [paramsInfo]="{
                    key_file: key_file,
                    directory: directorio,
                    type: 'put',
                    tabla: 'pendings',
                    tipo: 'DOCUMENTO_TRABAJO'}" [numFiles]="6" (filterValueChange)="valueFile($event)"
                    [listArrayFile]="arrayFile" [isDisabled]="false" [viewFile]="'UNIQUE'" [typeFile]="'audio-img'">
                  </lamb-prepare-file-pro>
                </div>
                <div class="col-md-6">
                  <label class="label">Link de Youtube</label><br>
                  <button nbButton size="small" status="info" outline fullWidth (click)="openUrlYoutube()">
                    <img src="https://i.pinimg.com/originals/91/c1/cd/91c1cdeacc84d0a5673bb716549ba366.png" height="20px"
                      alt="">
                  </button>
                </div>
              </div>
              <br>
              <div *ngIf="formHeader?.value?.tipo_adjunto === 'ARCHIVO'" class="text-center">
                <div *ngIf="formHeader?.value?.file?.ext_file !== 'mp3'">
                  <div style="text-align: right; cursor: pointer;">
                    <nb-icon icon="close-circle-outline" status="danger" (click)="deleteFile()"></nb-icon>
                  </div>
                  <div>
                    <img src="{{formHeader?.value?.file?.base64}}"
                      style="width: 100%; height: 100%;max-height: 170px;margin: 0 auto;" alt="">
                  </div>
                </div>
                <div *ngIf="formHeader?.value?.file?.ext_file === 'mp3'">
                  <div style="text-align: right; cursor: pointer;">
                    <nb-icon icon="close-circle-outline" status="danger" (click)="deleteFile()"></nb-icon>
                  </div>
                  <div style="padding-top: 0px;">
                    <app-video-player [url]="formHeader?.value?.file?.base64" [videoFormat]="'Audio'"></app-video-player>
                  </div>
                </div>
              </div>
              <div *ngIf="formHeader?.value?.tipo_adjunto === 'URL'">
                <div style="text-align: right; cursor: pointer;">
                  <nb-icon icon="close-circle-outline" status="danger" (click)="deleteLink()"></nb-icon>
                </div>
                <div>
                  <app-video-player [url]="formHeader?.value?.url_externa" [videoFormat]="'Youtube'"></app-video-player>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex align-items-center justify-content-between">
            <div></div>
            <div>
              <div class="d-flex">
                <div *ngFor="let opts of optionsType" style="padding-left: 3px; padding-right: 3px;">
                  <button nbButton size="large"
                    [ngStyle]="{'background': opts.checked ? opts.color : '', 'color': opts.checked ? 'white' : ''}"
                    (click)="changeButtom(opts)" [disabled]="formHeader.invalid" nbTooltip="{{opts.nombre}}"
                    nbTooltipPlacement="top" nbTooltipStatus="primary">
                    <nb-icon [icon]="opts.icon"></nb-icon>
                  </button>
                </div>
              </div>
            </div>
            <div></div>
          </div>
      
          <strong *ngIf="formHeader?.value?.type_alternative?.nombre">
            <br>
            {{formHeader?.value?.type_alternative?.nombre}}
            <hr>
          </strong>
          <ng-container class="container">
            <div *ngIf="['07'].includes(formHeader?.value?.type_alternative?.codigo)">
      
              <app-c-multi-option 
              [headParams]="formHeader.value"
              [item]="quiz"
              (loadings)="changeLoadings($event)"
              (changeSuccess)="changeSuccess($event)"
              ></app-c-multi-option>
      
            </div>
      
            <div *ngIf="['01'].includes(formHeader?.value?.type_alternative?.codigo)">
      
              <app-c-unique-option [headParams]="formHeader.value" [item]="quiz" (loadings)="changeLoadings($event)"></app-c-unique-option>
      
            </div>
      
            <div *ngIf="['05'].includes(formHeader?.value?.type_alternative?.codigo)">
      
              <app-c-relation [headParams]="formHeader.value" [item]="quiz" (loadings)="changeLoadings($event)"></app-c-relation>
      
            </div>
      
            <div *ngIf="['02'].includes(formHeader?.value?.type_alternative?.codigo)">
      
              <app-c-true-false [headParams]="formHeader.value" [item]="quiz"></app-c-true-false>
      
            </div>
      
            <div *ngIf="['03'].includes(formHeader?.value?.type_alternative?.codigo)">
      
              <app-c-open [headParams]="formHeader.value" [item]="quiz"></app-c-open>
      
            </div>
      
            <div *ngIf="['04'].includes(formHeader?.value?.type_alternative?.codigo)">
      
              <app-c-closed [headParams]="formHeader.value" [item]="quiz"></app-c-closed>
      
            </div>
      
          </ng-container>
      
      
        </nb-card-body>
      </nb-card>

    </div>
   <div  [class]="quiz.pluss ? 'col-md-2' : ''">
     <nb-card *ngIf="quiz.pluss">
       <nb-card-body>
        <!-- <div class="d-flex flex-column" style="max-width: 80px;"> -->
          <button nbButton fullWidth ghost size="small" class="d-flex flex-column" (click)="changeValueCheck(quiz)">
            <nb-icon class="m-0 mb-2" icon="plus-outline" style="height: 24px; width: 24px;"></nb-icon>
            <span class="text-center">Añadir</span>
          </button> <br>
          <button *ngIf="quiz?.ultimo" nbButton fullWidth ghost size="small" class="d-flex flex-column" (click)="changeValueCheck(quiz)">
            <nb-icon class="m-0 mb-2" icon="npm-outline" style="height: 24px; width: 24px;"></nb-icon>
            <span class="text-center" style="line-height: 1.5;">Añadir<br>sección</span>
          </button>
        <!-- </div> -->
       </nb-card-body>
     </nb-card>
   </div>
  </div>

 

</div>


